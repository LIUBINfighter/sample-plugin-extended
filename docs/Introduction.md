# Sample Plugin Extended 功能介绍

这个文档介绍了 Sample Plugin Extended 插件的主要功能和组件。这是一个基于 Obsidian API 和 React 构建的扩展示例插件，展示了 Obsidian 插件开发的各种可能性。

## 目录

- [命令系统](#命令系统)
- [用户界面元素](#用户界面元素)
- [视图系统](#视图系统)
- [事件处理](#事件处理)
- [编辑器扩展](#编辑器扩展)
- [Markdown 处理](#markdown-处理)
- [模态框和对话框](#模态框和对话框)
- [设置系统](#设置系统)
- [其他功能](#其他功能)
- [开发特性](#开发特性)

## 命令系统

插件提供了多种类型的命令，展示了 Obsidian 命令 API 的不同用法：

### 普通命令
- **示例命令**：一个简单的命令，执行时显示通知
- **命令 ID**：`sample-command`

### 编辑器命令
- **示例编辑器命令**：在编辑器中插入文本
- **命令 ID**：`sample-editor-command`
- **功能**：在当前选择位置插入 "Sample Editor Command" 文本

### 条件命令
- **带检查的示例命令**：只在特定条件下可用的命令
- **命令 ID**：`sample-command-with-check`
- **条件**：只在打开 Markdown 视图时可用

## 用户界面元素

插件添加了多种 UI 元素到 Obsidian 界面：

### 状态栏项
- 在状态栏添加了一个文本项："Sample status bar item"

### 功能区图标
- 添加了一个带有骰子图标的功能区按钮
- 点击时显示通知消息

## 视图系统

插件实现了多种自定义视图：

### 基础视图
- **视图类型**：`SamplePluginExtended-SampleView`
- **显示内容**：简单的标题 "Sample view"

### React 视图
- **视图类型**：`sample-plugin-extended-SampleReactView`
- **功能**：展示了如何在 Obsidian 中集成 React 组件
- **组件特性**：
  - 计数器功能（可增加数字）
  - 显示当前 vault 名称
  - 使用 React Hooks 和上下文

## 事件处理

插件演示了多种事件处理机制：

### DOM 事件
- 监听文档的双击事件
- 显示被点击元素的标签名

### Obsidian 事件
- 监听 vault 的文件创建事件
- 在布局准备好后显示新创建文件的名称

### 定时器事件
- 设置了一个 60 秒的定时器
- 每分钟显示一次通知

## 编辑器扩展

插件扩展了 Obsidian 的编辑器功能：

### 编辑器状态字段
- 实现了自定义编辑器状态
- 提供了文档内容的装饰功能

### 编辑器视图插件
- 为编辑器添加了自定义视图插件
- 在列表项前添加自定义小部件

### 编辑器建议
- 实现了自定义的编辑器建议功能
- 在特定条件下提供自动完成建议

## Markdown 处理

插件提供了 Markdown 内容处理功能：

### 代码块处理器
- 处理 `sample-code-block-processor` 代码块
- 将代码块内容替换为自定义文本

### Markdown 后处理器
- 处理 Markdown 渲染后的 HTML 内容
- 修改特定类的元素内容

## 模态框和对话框

插件实现了多种对话框和模态框：

### 自定义模态框
- `SampleModal` - 自定义模态框示例
- 可通过命令调用

### 内置对话框
- **警告框**：显示简单的警告消息
- **确认框**：请求用户确认操作
- **提示框**：请求用户输入文本，带验证功能
- **选择项框**：让用户从列表中选择一项

## 设置系统

插件实现了完整的设置系统：

### 设置管理
- `PluginSettingsManager` - 管理插件设置的存储和加载
- 支持序列化和反序列化设置

### 设置项
- 多种类型的设置项：
  - 复选框设置
  - 颜色设置
  - 日期和时间设置
  - 下拉菜单设置
  - 邮箱设置
  - 格式设置
  - 月份和周设置
  - 多选设置
  - 数字设置
  - 进度条设置
  - 搜索设置
  - 滑块设置
  - 文本区域设置
  - 文本设置
  - 时间设置
  - 开关设置
  - 三态复选框设置

### 设置界面
- `PluginSettingsTab` - 提供用户友好的设置界面
- 组织设置项到不同部分

## 其他功能

插件还包含其他多种功能：

### 协议处理
- 处理 `obsidian://sample-action` 协议
- 显示协议参数信息

### 文件扩展关联
- 注册了 `sample-extension-1` 和 `sample-extension-2` 文件扩展名
- 将这些扩展名关联到示例视图

### 悬停链接源
- 为示例视图注册了悬停链接源
- 自定义链接悬停行为

## 开发特性

插件包含一些开发相关的特性：

### 自动构建系统
- 使用 `obsidian-dev-utils` 进行构建
- 自动将 `dist/dev` 目录中的文件复制到根目录
- 支持开发模式下的文件监视和自动复制

### 代码组织
- 模块化的代码结构
- 类型安全的实现
- 使用 TypeScript 的高级特性

---

这个插件主要用作开发模板或学习资源，展示了如何使用 Obsidian API 和 React 来构建功能丰富的插件。开发者可以参考这个示例来实现自己的插件功能。
